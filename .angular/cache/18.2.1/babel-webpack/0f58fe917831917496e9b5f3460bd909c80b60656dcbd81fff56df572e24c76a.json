{"ast":null,"code":"'use strict';\n\nconst {\n  detachNodeFromParent\n} = require('../lib/xast.js');\nexports.name = 'removeEmptyText';\nexports.description = 'removes empty <text> elements';\n\n/**\n * Remove empty Text elements.\n *\n * @see https://www.w3.org/TR/SVG11/text.html\n *\n * @example\n * Remove empty text element:\n * <text/>\n *\n * Remove empty tspan element:\n * <tspan/>\n *\n * Remove tref with empty xlink:href attribute:\n * <tref xlink:href=\"\"/>\n *\n * @author Kir Belevich\n *\n * @type {import('./plugins-types').Plugin<'removeEmptyText'>}\n */\nexports.fn = (root, params) => {\n  const {\n    text = true,\n    tspan = true,\n    tref = true\n  } = params;\n  return {\n    element: {\n      enter: (node, parentNode) => {\n        // Remove empty text element\n        if (text && node.name === 'text' && node.children.length === 0) {\n          detachNodeFromParent(node, parentNode);\n        }\n        // Remove empty tspan element\n        if (tspan && node.name === 'tspan' && node.children.length === 0) {\n          detachNodeFromParent(node, parentNode);\n        }\n        // Remove tref with empty xlink:href attribute\n        if (tref && node.name === 'tref' && node.attributes['xlink:href'] == null) {\n          detachNodeFromParent(node, parentNode);\n        }\n      }\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}