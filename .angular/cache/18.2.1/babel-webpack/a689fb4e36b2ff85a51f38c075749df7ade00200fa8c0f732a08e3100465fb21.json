{"ast":null,"code":"import _asyncToGenerator from \"/Users/abinalias/Documents/character-illustration-creator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../svg.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"../svg-optimizer.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"@angular/common\";\nfunction CreateCharacterComponent_div_1_div_2_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_1_div_2_div_8_Template_div_click_0_listener() {\n      const option_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.selectBackground(option_r5));\n    });\n    i0.ɵɵelement(1, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵstyleMap(ctx_r1.selectedBackground == option_r5.image ? \"border: 3px solid red;\" : \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", option_r5.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CreateCharacterComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"div\");\n    i0.ɵɵtext(3, \"Choose background\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_1_div_2_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.showPopup = false);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 9);\n    i0.ɵɵelement(6, \"path\", 10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"div\", 11);\n    i0.ɵɵtemplate(8, CreateCharacterComponent_div_1_div_2_div_8_Template, 2, 3, \"div\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.backgroundOptions);\n  }\n}\nfunction CreateCharacterComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.showPopup = true);\n    });\n    i0.ɵɵelement(1, \"div\", 4);\n    i0.ɵɵtemplate(2, CreateCharacterComponent_div_1_div_2_Template, 9, 1, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showPopup);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_13_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_div_13_div_1_div_1_Template_div_click_0_listener() {\n      const avaFace_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r1.onFaceClick(avaFace_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const avaFace_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵstyleMap(ctx_r1.selectedFace == avaFace_r8 ? \"border: 10px solid red; box-shadow: 0 0 0 0px #ff3e3e, 0 16px 19px rgba(166, 99, 99, .28);\" : \"\");\n    i0.ɵɵproperty(\"innerHTML\", avaFace_r8, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, CreateCharacterComponent_div_2_div_13_div_1_div_1_Template, 1, 3, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.avaFaceSvgs);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_13_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_div_13_div_2_div_1_Template_div_click_0_listener() {\n      const jennaFace_r10 = i0.ɵɵrestoreView(_r9).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r1.onFaceClick(jennaFace_r10));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const jennaFace_r10 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵstyleMap(ctx_r1.selectedFace == jennaFace_r10 ? \"border: 10px solid red; box-shadow: 0 0 0 0px #ff3e3e, 0 16px 19px rgba(166, 99, 99, .28);\" : \"\");\n    i0.ɵɵproperty(\"innerHTML\", jennaFace_r10, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, CreateCharacterComponent_div_2_div_13_div_2_div_1_Template, 1, 3, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.jennaFaceSvgs);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, CreateCharacterComponent_div_2_div_13_div_1_Template, 2, 1, \"div\", 22)(2, CreateCharacterComponent_div_2_div_13_div_2_Template, 2, 1, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedCharacter === \"ava\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedCharacter === \"jenna\");\n  }\n}\nfunction CreateCharacterComponent_div_2_div_14_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 29);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_div_14_img_2_Template_img_click_0_listener() {\n      const i_r12 = i0.ɵɵrestoreView(_r11).index;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.onHandClick(ctx_r1.rightHandSvgs[i_r12], \"right\"));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rightHandPng_r13 = ctx.$implicit;\n    const i_r12 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵstyleMap(ctx_r1.selectedRightHand == ctx_r1.rightHandSvgs[i_r12] ? \"border: 10px solid red; box-shadow: 0 0 0 0px #ff3e3e, 0 16px 19px rgba(166, 99, 99, .28);\" : \"\");\n    i0.ɵɵproperty(\"src\", rightHandPng_r13, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 23);\n    i0.ɵɵtemplate(2, CreateCharacterComponent_div_2_div_14_img_2_Template, 1, 3, \"img\", 28);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.rightHandPngPaths);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_15_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 29);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_div_15_img_2_Template_img_click_0_listener() {\n      const i_r15 = i0.ɵɵrestoreView(_r14).index;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.onHandClick(ctx_r1.leftHandSvgs[i_r15], \"left\"));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const leftHandPng_r16 = ctx.$implicit;\n    const i_r15 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵstyleMap(ctx_r1.selectedLeftHand == ctx_r1.leftHandSvgs[i_r15] ? \"border: 10px solid red; box-shadow: 0 0 0 0px #ff3e3e, 0 16px 19px rgba(166, 99, 99, .28);\" : \"\");\n    i0.ɵɵproperty(\"src\", leftHandPng_r16, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CreateCharacterComponent_div_2_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 23);\n    i0.ɵɵtemplate(2, CreateCharacterComponent_div_2_div_15_img_2_Template, 1, 3, \"img\", 28);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.leftHandPngPaths);\n  }\n}\nfunction CreateCharacterComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"div\", 17)(3, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_Template_div_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectTab(\"face\"));\n    });\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Face Expression\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_Template_div_click_6_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectTab(\"rightHand\"));\n    });\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8, \"Right Hand Posture\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function CreateCharacterComponent_div_2_Template_div_click_9_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectTab(\"leftHand\"));\n    });\n    i0.ɵɵelementStart(10, \"span\");\n    i0.ɵɵtext(11, \"Left Hand Posture\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 19);\n    i0.ɵɵtemplate(13, CreateCharacterComponent_div_2_div_13_Template, 3, 2, \"div\", 20)(14, CreateCharacterComponent_div_2_div_14_Template, 3, 1, \"div\", 20)(15, CreateCharacterComponent_div_2_div_15_Template, 3, 1, \"div\", 20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"selected\", ctx_r1.selectedTab === \"face\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"selected\", ctx_r1.selectedTab === \"rightHand\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"selected\", ctx_r1.selectedTab === \"leftHand\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedTab === \"face\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedTab === \"rightHand\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedTab === \"leftHand\");\n  }\n}\nexport let CreateCharacterComponent = /*#__PURE__*/(() => {\n  class CreateCharacterComponent {\n    svgService;\n    sanitizer;\n    svgOptimizer;\n    http;\n    faceSvg1 = [];\n    assetsColor = [];\n    postureSelected = '';\n    // @ViewChild('myCanvas', { static: false }) myCanvas!: ElementRef<HTMLCanvasElement>;\n    // private context!: CanvasRenderingContext2D;\n    selectedSkinColor = null;\n    selectedTopColor = null;\n    selectedPantColor = null;\n    sitingX = 0;\n    sitingY = 0;\n    selectedTab = 'face';\n    skinColors = ['#E98C7B', '#F4BCA4', '#FFB784', '#F3A396', '#B2674B'];\n    topColors = ['#78A9FF', '#EF5DA8', '#F3BB9D'];\n    pantColors = ['#001D6C', '#EF5DA8'];\n    showPopup = false;\n    selectedBackground = 'default-background.svg';\n    backgroundOptions = [{\n      image: 'backgrounds/1.svg',\n      svg: 'backgrounds/1.svg'\n    }, {\n      image: 'backgrounds/2.svg',\n      svg: 'backgrounds/2.svg'\n    }, {\n      image: 'backgrounds/3.svg',\n      svg: 'backgrounds/3.svg'\n    }, {\n      image: 'backgrounds/5.svg',\n      svg: 'backgrounds/5.svg'\n    }, {\n      image: 'backgrounds/6.svg',\n      svg: 'backgrounds/6.svg'\n    }, {\n      image: 'backgrounds/9.svg',\n      svg: 'backgrounds/9.svg'\n    }];\n    selectedFace = null;\n    selectedRightHand = null;\n    selectedLeftHand = null;\n    selectedCharacter = null;\n    faceSvgs = [];\n    rightHandSvgs = [];\n    leftHandSvgs = [];\n    backgroundSvgs = [];\n    avaFaceSvgs = [];\n    jennaFaceSvgs = [];\n    faceSvg = 'body.svg';\n    bodySvg = 'body.svg';\n    leftHandSvg = 'left-hand.svg';\n    rightHandSvg = null;\n    legsSvg = 'legs.svg';\n    backgroundSvg = 'backgrounds/9.svg';\n    svgContainerData = false;\n    faceSvgPaths = ['Face-1.svg', 'Face-2.svg', 'Face-3.svg'];\n    rightHandSvgPaths = ['hands/Right-hand/right-hand-1.svg', 'hands/Right-hand/right-hand-2.svg', 'hands/Right-hand/right-hand-3.svg', 'hands/Right-hand/right-hand-4.svg'];\n    leftHandSvgPaths = ['hands/Left-hand/left-hand-1.svg', 'hands/Left-hand/left-hand-2.svg', 'hands/Left-hand/left-hand-3.svg', 'hands/Left-hand/left-hand-4.svg', 'hands/Left-hand/left-hand-5.svg'];\n    backgroundSvgPaths = ['backgrounds/1.svg', 'backgrounds/2.svg', 'backgrounds/3.svg', 'backgrounds/5.svg', 'backgrounds/6.svg', 'backgrounds/8.svg'];\n    avaFacePaths = ['face/female/Ava/Ava-1.svg', 'face/female/Ava/Ava-2.svg', 'face/female/Ava/Ava-3.svg', 'face/female/Ava/Ava-4.svg', 'face/female/Ava/Ava-5.svg', 'face/female/Ava/Ava-6.svg', 'face/female/Ava/Ava-7.svg'];\n    jennaFacePaths = ['face/female/Jenna/Jenna-1.svg', 'face/female/Jenna/Jenna-2.svg', 'face/female/Jenna/Jenna-3.svg', 'face/female/Jenna/Jenna-4.svg', 'face/female/Jenna/Jenna-5.svg', 'face/female/Jenna/Jenna-6.svg', 'face/female/Jenna/Jenna-7.svg', 'face/female/Jenna/Jenna-8.svg', 'face/female/Jenna/Jenna-9.svg'];\n    rightHandPngPaths = ['hands/Right-hand/png/right-hand-1.png', 'hands/Right-hand/png/right-hand-2.png', 'hands/Right-hand/png/right-hand-3.png', 'hands/Right-hand/png/right-hand-4.png'];\n    leftHandPngPaths = ['hands/Left-hand/png/left-hand-1.png', 'hands/Left-hand/png/left-hand-2.png', 'hands/Left-hand/png/left-hand-3.png', 'hands/Left-hand/png/left-hand-4.png', 'hands/Left-hand/png/left-hand-5.png'];\n    constructor(svgService, sanitizer, svgOptimizer, http) {\n      this.svgService = svgService;\n      this.sanitizer = sanitizer;\n      this.svgOptimizer = svgOptimizer;\n      this.http = http;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.loadInitialSvgs();\n        yield _this.loadSvgSets(_this.backgroundSvgPaths, _this.backgroundSvgs);\n        yield _this.loadSvgSets(_this.faceSvgPaths, _this.faceSvgs);\n        yield _this.loadSvgSets(_this.rightHandSvgPaths, _this.rightHandSvgs);\n        yield _this.loadSvgSets(_this.leftHandSvgPaths, _this.leftHandSvgs);\n        yield _this.loadSvgSets(_this.backgroundSvgPaths, _this.backgroundSvgs);\n        yield _this.loadSvgSets(_this.avaFacePaths, _this.avaFaceSvgs);\n        yield _this.loadSvgSets(_this.jennaFacePaths, _this.jennaFaceSvgs);\n        _this.selectedRightHand = _this.rightHandSvgs[1].toString();\n        _this.selectedLeftHand = _this.leftHandSvgs[1].toString();\n        _this.selectedBackground = _this.backgroundSvgPaths[1];\n        _this.selectedFace = _this.faceSvgs[1].toString();\n      })();\n    }\n    ngOnChanges(changes) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (changes['faceSvg1'] && _this2.faceSvg1) {\n          console.log('face changed:', _this2.faceSvg1);\n          _this2.selectedFace = _this2.faceSvg1[0].toString();\n          _this2.faceSvg = _this2.selectedFace;\n          _this2.selectedCharacter = _this2.faceSvg1[1];\n          _this2.combineAndDisplaySvgs();\n        }\n        if (changes['assetsColor'] && _this2.assetsColor) {\n          // Handle assetsColor changes\n          console.log('assetsColor changed:', _this2.assetsColor);\n          const [element, color] = _this2.assetsColor;\n          _this2.onColorChange(element, color);\n        }\n        if (changes['postureSelected'] && _this2.postureSelected) {\n          if (_this2.postureSelected == 'standing') {\n            _this2.legsSvg = yield _this2.svgService.loadSvg('leg/standing.svg');\n            _this2.legsSvg = yield _this2.svgOptimizer.optimize(_this2.legsSvg);\n            _this2.combineAndDisplaySvgs();\n          } else if (_this2.postureSelected == 'walking') {\n            _this2.legsSvg = yield _this2.svgService.loadSvg('leg/walking.svg');\n            _this2.legsSvg = yield _this2.svgOptimizer.optimize(_this2.legsSvg);\n            _this2.combineAndDisplaySvgs();\n          } else if (_this2.postureSelected == 'siting') {\n            _this2.legsSvg = yield _this2.svgService.loadSvg('leg/siting.svg');\n            _this2.legsSvg = yield _this2.svgOptimizer.optimize(_this2.legsSvg);\n            _this2.combineAndDisplaySvgs();\n          }\n        }\n      })();\n    }\n    selectTab(tab) {\n      this.selectedTab = tab;\n    }\n    loadInitialSvgs() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        _this3.backgroundSvg = yield _this3.svgService.loadSvg(_this3.backgroundSvgPaths[1]);\n        _this3.faceSvg = yield _this3.svgService.loadSvg(_this3.faceSvgPaths[1]);\n        _this3.faceSvg = yield _this3.svgOptimizer.optimize(_this3.faceSvg);\n        _this3.bodySvg = yield _this3.svgService.loadSvg('body.svg');\n        _this3.bodySvg = yield _this3.svgOptimizer.optimize(_this3.bodySvg);\n        _this3.leftHandSvg = yield _this3.svgService.loadSvg(_this3.leftHandSvgPaths[1]);\n        _this3.leftHandSvg = yield _this3.svgOptimizer.optimize(_this3.leftHandSvg);\n        _this3.rightHandSvg = yield _this3.svgService.loadSvg(_this3.rightHandSvgPaths[1]);\n        _this3.rightHandSvg = yield _this3.svgOptimizer.optimize(_this3.rightHandSvg);\n        _this3.legsSvg = yield _this3.svgService.loadSvg('leg/standing.svg');\n        _this3.legsSvg = yield _this3.svgOptimizer.optimize(_this3.legsSvg);\n      })();\n    }\n    loadSvgSets(paths, svgArray) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          for (const path of paths) {\n            const svg = yield _this4.svgService.loadSvg(path);\n            const sanitizedSvg = _this4.sanitizer.bypassSecurityTrustHtml(svg);\n            svgArray.push(sanitizedSvg);\n          }\n        } catch (error) {\n          console.error('Error loading SVGs:', error);\n        }\n      })();\n    }\n    onFaceClick(face) {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        _this5.selectedFace = face.toString();\n        _this5.faceSvg = _this5.selectedFace;\n        console.log('Selected face:', face);\n        // if(this.selectedSkinColor=''){\n        //   this.selectedSkinColor = this.skinColors[1];\n        // }\n        yield _this5.combineAndDisplaySvgs();\n      })();\n    }\n    onHandClick(hand, handChoosen) {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        if (handChoosen == \"right\") {\n          _this6.selectedRightHand = hand.toString();\n          _this6.rightHandSvg = _this6.selectedRightHand;\n        } else if (handChoosen == \"left\") {\n          _this6.selectedLeftHand = hand.toString();\n          _this6.leftHandSvg = _this6.selectedLeftHand;\n        } else {\n          console.log(\"something wrong in the hand selection\");\n        }\n        console.log('Selected hand:', hand);\n        yield _this6.combineAndDisplaySvgs();\n      })();\n    }\n    selectBackground(option) {\n      var _this7 = this;\n      return _asyncToGenerator(function* () {\n        _this7.selectedBackground = option.image;\n        _this7.backgroundSvg = yield _this7.svgService.loadSvg(option.svg);\n        if (_this7.selectedBackground == 'backgrounds/1.svg') {\n          _this7.backgroundSvg = '';\n        }\n        // this.backgroundSvg = option.svg.toString();\n        _this7.showPopup = false;\n        _this7.combineAndDisplaySvgs();\n      })();\n    }\n    combineAndDisplaySvgs() {\n      var _this8 = this;\n      return _asyncToGenerator(function* () {\n        const svgContainer = document.getElementById('svg-container');\n        if (!svgContainer) return;\n        _this8.sitingX = 150;\n        _this8.sitingY = 0;\n        if (_this8.postureSelected == 'siting') {\n          _this8.sitingX = 200;\n          _this8.sitingY = 160;\n        }\n        const svgContent = ` \n    <svg width=\"1600\" height=\"1000\" xmlns=\"http://www.w3.org/2000/svg\">\n      ${_this8.backgroundSvg ? `<g id=\"background\" transform=\"translate(${0}, -100)\">${_this8.backgroundSvg}</g>` : ''}\n      <g id=\"face\" transform=\"translate(${502 + _this8.sitingX}, ${150 + _this8.sitingY})\">${_this8.faceSvg}</g>\n      <g id=\"body\" transform=\"translate(${550 + _this8.sitingX}, ${325 + _this8.sitingY})\">${_this8.bodySvg}</g>\n      <g id=\"legs\" transform=\"translate(${350 + _this8.sitingX}, ${475 + _this8.sitingY})\">${_this8.legsSvg}</g>\n      <g id=\"left-hand\" transform=\"translate(${604 + _this8.sitingX}, ${259 + _this8.sitingY})\">${_this8.leftHandSvg}</g>\n      <g id=\"right-hand\" transform=\"translate(${375 + _this8.sitingX}, ${328 + _this8.sitingY})\">${_this8.rightHandSvg}</g>\n    </svg>\n  `;\n        try {\n          const optimizedSvg = yield _this8.svgOptimizer.optimize(svgContent);\n          svgContainer.innerHTML = optimizedSvg;\n          _this8.applyColors(svgContainer);\n          _this8.svgContainerData = true;\n        } catch (error) {\n          console.error('Error optimizing SVG:', error);\n        }\n      })();\n    }\n    applyColors(svgContainer) {\n      const svgElements = svgContainer.querySelectorAll('svg');\n      svgElements.forEach(svgElement => {\n        if (this.selectedSkinColor) {\n          this.changeColor(svgElement, '.skin', this.selectedSkinColor);\n        }\n        if (this.selectedTopColor) {\n          this.changeColor(svgElement, '.top', this.selectedTopColor);\n        }\n        if (this.selectedPantColor) {\n          this.changeColor(svgElement, '.pant', this.selectedPantColor);\n        }\n      });\n    }\n    ngAfterViewInit() {}\n    downloadSVG() {\n      const svgElement = document.getElementById('svg-container')?.innerHTML;\n      if (!svgElement) return;\n      const svgBlob = new Blob([svgElement], {\n        type: 'image/svg+xml;charset=utf-8'\n      });\n      const svgUrl = URL.createObjectURL(svgBlob);\n      this.downloadFile(svgUrl, 'illustration.svg');\n    }\n    downloadPNG() {\n      var _this9 = this;\n      return _asyncToGenerator(function* () {\n        const svgContainer = document.getElementById('svg-container');\n        if (!svgContainer) return;\n        const svgElement = svgContainer.innerHTML;\n        if (!svgElement) return;\n        const sanitizedSvg = svgElement.replace(/(\\r\\n|\\n|\\r)/gm, \"\").trim();\n        const base64Svg = window.btoa(unescape(encodeURIComponent(sanitizedSvg)));\n        const svgDataUrl = `data:image/svg+xml;base64,${base64Svg}`;\n        const image = new Image();\n        image.onload = () => {\n          const canvas = document.createElement('canvas');\n          canvas.width = image.width;\n          canvas.height = image.height;\n          const context = canvas.getContext('2d');\n          if (context) {\n            context.drawImage(image, 0, 0);\n            canvas.toBlob(blob => {\n              if (blob) {\n                const pngUrl = URL.createObjectURL(blob);\n                _this9.downloadFile(pngUrl, 'illustration.png');\n                URL.revokeObjectURL(pngUrl);\n              }\n            }, 'image/png');\n          }\n        };\n        image.onerror = err => console.error('Failed to load image', err);\n        image.src = svgDataUrl;\n      })();\n    }\n    downloadFile(url, filename) {\n      const downloadLink = document.createElement('a');\n      downloadLink.href = url;\n      downloadLink.download = filename;\n      document.body.appendChild(downloadLink);\n      downloadLink.click();\n      document.body.removeChild(downloadLink);\n    }\n    onColorChange(element, color) {\n      const svgContainer = document.getElementById('svg-container');\n      if (!svgContainer) return;\n      switch (element) {\n        case \"skin\":\n          this.selectedSkinColor = color;\n          break;\n        case \"top\":\n          this.selectedTopColor = color;\n          break;\n        case \"pant\":\n          this.selectedPantColor = color;\n          break;\n      }\n      this.applyColors(svgContainer);\n    }\n    changeColor(svgElement, selector, color) {\n      svgElement.querySelectorAll(selector).forEach(element => {\n        element.setAttribute('fill', color);\n      });\n    }\n    static ɵfac = function CreateCharacterComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CreateCharacterComponent)(i0.ɵɵdirectiveInject(i1.SvgService), i0.ɵɵdirectiveInject(i2.DomSanitizer), i0.ɵɵdirectiveInject(i3.SvgOptimizerService), i0.ɵɵdirectiveInject(i4.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CreateCharacterComponent,\n      selectors: [[\"app-create-character\"]],\n      inputs: {\n        faceSvg1: \"faceSvg1\",\n        assetsColor: \"assetsColor\",\n        postureSelected: \"postureSelected\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 3,\n      vars: 2,\n      consts: [[1, \"test\", 2, \"display\", \"flex\", \"height\", \"100%\", \"width\", \"100%\"], [\"class\", \"svg-wrapper-container\", 3, \"click\", 4, \"ngIf\"], [\"style\", \"justify-content: space-between;align-items: center;\", \"id\", \"container\", 4, \"ngIf\"], [1, \"svg-wrapper-container\", 3, \"click\"], [\"id\", \"svg-container\", 1, \"character-svg\"], [\"class\", \"popup\", 4, \"ngIf\"], [1, \"popup\"], [1, \"popup__head\"], [3, \"click\"], [\"width\", \"8\", \"height\", \"8\", \"viewBox\", \"0 0 8 8\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"fill-rule\", \"evenodd\", \"clip-rule\", \"evenodd\", \"d\", \"M1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292894 0.292893C-0.0976301 0.683417 -0.0976301 1.31658 0.292894 1.70711L2.58579 4L0.292894 6.29289C-0.09763 6.68342 -0.09763 7.31658 0.292894 7.70711C0.683419 8.09763 1.31658 8.09763 1.70711 7.70711L4 5.41421L6.29289 7.70711C6.68342 8.09763 7.31658 8.09763 7.70711 7.70711C8.09763 7.31658 8.09763 6.68342 7.70711 6.29289L5.41421 4L7.70711 1.70711C8.09763 1.31658 8.09763 0.683417 7.70711 0.292893C7.31658 -0.0976311 6.68342 -0.0976311 6.29289 0.292893L4 2.58579L1.70711 0.292893Z\", \"fill\", \"#363D61\"], [1, \"popup__body\"], [\"class\", \"backdrop-option\", 3, \"style\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"backdrop-option\", 3, \"click\"], [\"alt\", \"Background option\", 3, \"src\"], [\"id\", \"container\", 2, \"justify-content\", \"space-between\", \"align-items\", \"center\"], [\"id\", \"svg-selection-container\", 1, \"svg-container\"], [1, \"tabs-container\"], [1, \"tab\", 3, \"click\"], [1, \"content-container\"], [\"class\", \"content\", 4, \"ngIf\"], [1, \"content\"], [\"class\", \"svg-wrapper\", 4, \"ngIf\"], [1, \"svg-wrapper\"], [\"style\", \"padding: 35px;\", \"class\", \"svg-item\", 3, \"style\", \"innerHTML\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"svg-item\", 2, \"padding\", \"35px\", 3, \"click\", \"innerHTML\"], [\"class\", \"svg-item\", 3, \"style\", \"innerHTML\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"svg-item\", 3, \"click\", \"innerHTML\"], [\"class\", \"svg-item\", 3, \"style\", \"src\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"svg-item\", 3, \"click\", \"src\"]],\n      template: function CreateCharacterComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, CreateCharacterComponent_div_1_Template, 3, 1, \"div\", 1)(2, CreateCharacterComponent_div_2_Template, 16, 9, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedBackground);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.svgContainerData);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf],\n      styles: [\"#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#svg-selection-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#face-container[_ngcontent-%COMP%], #hand-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-wrap:wrap;justify-content:center}.svg-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.svg-wrapper-container[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center;align-items:center;height:100%;width:65%}.download-options[_ngcontent-%COMP%]{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fffc;border:1px solid #ccc;border-radius:5px;padding:10px;z-index:1000}.svg-wrapper-container[_ngcontent-%COMP%]:hover   .download-options[_ngcontent-%COMP%]{display:block}.download-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:5px 0;padding:5px 10px;border:none;background-color:#007bff;color:#fff;cursor:pointer;border-radius:3px}.download-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.test[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;flex-wrap:wrap}.popup[_ngcontent-%COMP%]{position:absolute;top:0;left:10%;display:flex;flex-direction:column;border:1px solid #ccc;z-index:10;background:#fff;box-shadow:0 16px 19px #a6636326;border-radius:8px;width:250px}.backdrop-option[_ngcontent-%COMP%]{cursor:pointer;display:flex;padding:5px;border:3px solid #eee;border-radius:6px;margin:5px}.backdrop-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:10px}.backdrop-option[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.popup__head[_ngcontent-%COMP%]{display:flex;height:40px;padding:0 16px;border-bottom:1px solid rgba(221,218,220,.5);font-size:12px;font-weight:600;align-items:center;cursor:move;justify-content:space-between}.popup__body[_ngcontent-%COMP%]{max-height:280px;color:transparent;transition:color .2s;overflow:auto;display:flex;flex-wrap:wrap;margin:10px}.content[_ngcontent-%COMP%]{height:500px;width:200px;flex-wrap:wrap}.svg-container[_ngcontent-%COMP%]{display:flex;padding:20px;border-radius:10px}.tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:20px;border-right:2px solid #eee}.tab[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 15px;margin-bottom:15px;cursor:pointer;border-radius:5px;transition:background-color .3s ease}.tab[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.tab.selected[_ngcontent-%COMP%]{background-color:#ffe5e5;border-left:4px solid #ff5a5a}.tab-icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px}.content-container[_ngcontent-%COMP%]{flex-grow:1}.svg-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;zoom:.3}.svg-item[_ngcontent-%COMP%]{padding:15px;margin:12px;cursor:pointer;transition:transform .3s ease;border:10px solid #eee;border-radius:20px}.svg-item[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 2600px){.character-svg[_ngcontent-%COMP%]{zoom:.55}}@media (max-width: 1500px){.character-svg[_ngcontent-%COMP%]{zoom:.6}}@media (max-width: 1200px){.character-svg[_ngcontent-%COMP%]{zoom:.6}}@media (max-width: 992px){.character-svg[_ngcontent-%COMP%]{zoom:.4}}@media (max-width: 768px){.character-svg[_ngcontent-%COMP%]{zoom:.4}}@media (max-width: 576px){.character-svg[_ngcontent-%COMP%]{zoom:.3}}\"]\n    });\n  }\n  return CreateCharacterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}