{"ast":null,"code":"'use strict';\n\nconst {\n  detachNodeFromParent\n} = require('../lib/xast.js');\nexports.name = 'removeComments';\nexports.description = 'removes comments';\n\n/**\n * If a comment matches one of the following patterns, it will be\n * preserved by default. Particularly for copyright/license information.\n */\nconst DEFAULT_PRESERVE_PATTERNS = [/^!/];\n\n/**\n * Remove comments.\n *\n * @example\n * <!-- Generator: Adobe Illustrator 15.0.0, SVG Export\n * Plug-In . SVG Version: 6.00 Build 0)  -->\n *\n * @author Kir Belevich\n *\n * @type {import('./plugins-types').Plugin<'removeComments'>}\n */\nexports.fn = (_root, params) => {\n  const {\n    preservePatterns = DEFAULT_PRESERVE_PATTERNS\n  } = params;\n  return {\n    comment: {\n      enter: (node, parentNode) => {\n        if (preservePatterns) {\n          if (!Array.isArray(preservePatterns)) {\n            throw Error(`Expected array in removeComments preservePatterns parameter but received ${preservePatterns}`);\n          }\n          const matches = preservePatterns.some(pattern => {\n            return new RegExp(pattern).test(node.value);\n          });\n          if (matches) {\n            return;\n          }\n        }\n        detachNodeFromParent(node, parentNode);\n      }\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}